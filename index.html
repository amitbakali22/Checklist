<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Real Estate Checklist</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8f9fa; padding: 20px; }
    h2 { text-align: center; }
    form, .controls, ul { max-width: 800px; margin: auto; }
    input, select, button {
      width: 100%; padding: 8px; margin: 6px 0;
      border-radius: 4px; border: 1px solid #ccc;
    }
    button { background: #007bff; color: white; border: none; cursor: pointer; }
    button:hover { background: #0056b3; }
    .hidden { display: none; }
    .record { background: #fff; padding: 10px; margin: 10px 0; border-left: 5px solid #007bff; border-radius: 5px; }
  </style>
</head>
<body>

<h2>Real Estate Checklist</h2>

<form id="form" onsubmit="event.preventDefault(); save();">
  <label><input type="radio" name="type" value="Commercial Rental" checked onchange="toggleFields()"> Commercial Rental</label>
  <label><input type="radio" name="type" value="Residential Sale" onchange="toggleFields()"> Residential Sale</label>

  <input data-field="propertyName" placeholder="Property Name" required />
  <input data-field="location" placeholder="Location" required />
  <input data-field="developer" placeholder="Developer" />

  <!-- Shared -->
  <input data-field="propertySize" placeholder="Property Size (sqft)" />

  <!-- Commercial Fields -->
  <div class="type-commercial">
    <input data-field="numberOfBalcony" placeholder="Number of Balcony" />
    <input data-field="numberOfParking" placeholder="Number of Parking" />
    <input data-field="numberOfLift" placeholder="Number of Lift" />
    <input data-field="floor" placeholder="Floor" />
    <input data-field="unit" placeholder="Unit" />
    <input data-field="unitPerFloor" placeholder="Unit Per Floor" />
    <input data-field="rent" placeholder="Rent (BDT)" />
    <input data-field="serviceCharge" placeholder="Service Charge (BDT)" />
    <input data-field="advance" placeholder="Advance (BDT)" />
    <input data-field="securityDeposit" placeholder="Security Deposit (BDT)" />
    <input data-field="yearBuilt" placeholder="Year Built" />
    <input data-field="propertyType" placeholder="Property Type" />
    <input data-field="interior" placeholder="Interior" />
  </div>

  <!-- Residential Fields -->
  <div class="type-residential hidden">
    <input data-field="bed" placeholder="Bed" />
    <input data-field="bath" placeholder="Bath" />
    <input data-field="numOfBalcony" placeholder="Number of Balcony" />
    <input data-field="parking" placeholder="Parking" />
    <input data-field="lift" placeholder="Lift" />
    <input data-field="floor" placeholder="Floor" />
    <input data-field="unit" placeholder="Unit" />
    <input data-field="unitPerFloor" placeholder="Unit Per Floor" />
    <input data-field="totalUnits" placeholder="Total Units" />
    <input data-field="price" placeholder="Price (BDT)" />
    <input data-field="serviceCharge" placeholder="Service Charge (BDT)" />
    <input data-field="yearBuilt" placeholder="Year Built" />
    <input data-field="garageSize" placeholder="Garage Size (sqft)" />
    <input data-field="propertyType" placeholder="Property Type" />
    <input data-field="propertyPurpose" placeholder="Property Purpose" />
    <input data-field="interior" placeholder="Interior" />
    <input data-field="buildingRegistrationType" placeholder="Building Registration Type" />
    <input data-field="frontRoadSize" placeholder="Front Road Size" />
    <input data-field="commonArea" placeholder="Common Area" />
    <input data-field="gas" placeholder="Gas (Yes/No)" />
    <input data-field="servantRoom" placeholder="Servant Room" />
    <input data-field="servantWashroom" placeholder="Servant Washroom" />
    <input data-field="apartmentFacing" placeholder="Apartment Facing" />
  </div>

  <input data-field="contact" placeholder="Contact Info" />
  <button type="submit">Add Record</button>
</form>

<div class="controls" style="max-width:800px; margin:auto; text-align:center;">
  <button onclick="exportToExcel()">üìÅ Download Excel</button>
  <button onclick="shareWhatsApp()">üì§ Share via WhatsApp</button>
</div>

<h3 style="text-align:center;">Records</h3>
<ul id="list" style="max-width:800px; margin:auto;"></ul>

<script>
  let records = JSON.parse(localStorage.getItem('records') || '[]');

  const save = () => {
    const type = document.querySelector('input[name="type"]:checked').value;
    const data = {};
    document.querySelectorAll('[data-field]').forEach(input => {
      data[input.dataset.field] = input.value.trim();
    });
    data['type'] = type;

    if (data.propertyName && data.location) {
      records.push(data);
      localStorage.setItem('records', JSON.stringify(records));
      document.getElementById('form').reset();
      render();
    }
  };

  const render = () => {
    const list = document.getElementById('list');
    list.innerHTML = '';
    records.forEach(r => {
      const li = document.createElement('li');
      li.className = "record";
      li.textContent = `${r.type}: ${r.propertyName}, ${r.location}, BDT ${r.rent || r.price || ''}, ${r.contact || ''}`;
      list.appendChild(li);
    });
  };

  const exportToExcel = () => {
    if (!records.length) return;
    const fields = Object.keys(records[0]);
    let csv = fields.join(',') + "\n";
    records.forEach(r => {
      csv += fields.map(f => r[f] || '').join(',') + "\n";
    });
    const blob = new Blob([csv], {type: 'text/csv'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'real_estate_records.csv';
    a.click();
  };

  const shareWhatsApp = () => {
    const msg = records.map(r =>
      `üè† ${r.propertyName}\nüìç ${r.location}\nüí∞ BDT ${r.rent || r.price}\nüìû ${r.contact}\nüìÇ ${r.type}`
    ).join("\n\n");
    window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
  };

  const toggleFields = () => {
    const type = document.querySelector('input[name="type"]:checked').value;
    document.querySelectorAll('.type-commercial').forEach(el => {
      el.style.display = type === 'Commercial Rental' ? 'block' : 'none';
    });
    document.querySelectorAll('.type-residential').forEach(el => {
      el.style.display = type === 'Residential Sale' ? 'block' : 'none';
    });
  };

  window.onload = () => {
    toggleFields();
    render();
  };
</script>

</body>
</html>