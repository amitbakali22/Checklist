<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Real Estate Checklist</title>
  <script>
    let records = JSON.parse(localStorage.getItem('records') || '[]');

    const save = () => {
      const type = document.querySelector('input[name="type"]:checked').value;
      const data = {};
      document.querySelectorAll('[data-field]').forEach(input => {
        data[input.dataset.field] = input.value;
      });
      data['type'] = type;

      if (data.propertyName && data.location) {
        records.push(data);
        localStorage.setItem('records', JSON.stringify(records));
        document.getElementById('form').reset();
        render();
      }
    };

    const render = () => {
      const list = document.getElementById('list');
      list.innerHTML = '';
      records.forEach(r => {
        const li = document.createElement('li');
        li.textContent = `${r.type}: ${r.propertyName}, ${r.location}, ${r.propertySize || ''} sqft, BDT ${r.rent || r.price || ''}, ${r.contact || ''}`;
        list.appendChild(li);
      });
    };

    const exportToExcel = () => {
      if (!records.length) return;
      const fields = Object.keys(records[0]);
      let csv = fields.join(',') + "\\n";
      records.forEach(r => {
        csv += fields.map(f => r[f] || '').join(',') + "\\n";
      });
      const blob = new Blob([csv], {type: 'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'real_estate_records.csv';
      a.click();
    };

    const shareWhatsApp = () => {
      const msg = records.map(r =>
        `ğŸ  ${r.propertyName}\nğŸ“ ${r.location}\nğŸ“ ${r.propertySize || r.size} sqft\nğŸ’° BDT ${r.rent || r.price}\nğŸ“ ${r.contact}\nğŸ“‚ ${r.type}`
      ).join("\n\n");
      window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
    };

    window.onload = render;
  </script>
</head>
<body style="font-family: Arial; padding: 20px;">
  <h2>Real Estate Checklist</h2>
  <form id="form" onsubmit="event.preventDefault(); save();">
    <label><input type="radio" name="type" value="Commercial Rental" checked> Commercial Rental</label>
    <label><input type="radio" name="type" value="Residential Sale"> Residential Sale</label><br><br>

    <input data-field="propertyName" placeholder="Property Name" required><br><br>
    <input data-field="location" placeholder="Location" required><br><br>
    <input data-field="propertySize" placeholder="Property Size (sqft)"><br><br>
    <input data-field="numberOfBalcony" placeholder="Number of Balcony"><br><br>
    <input data-field="numberOfParking" placeholder="Number of Parking"><br><br>
    <input data-field="numberOfLift" placeholder="Number of Lift"><br><br>
    <input data-field="floor" placeholder="Floor"><br><br>
    <input data-field="unit" placeholder="Unit"><br><br>
    <input data-field="unitPerFloor" placeholder="Unit Per Floor"><br><br>
    <input data-field="rent" placeholder="Rent (BDT)"><br><br>
    <input data-field="serviceCharge" placeholder="Service Charge (BDT)"><br><br>
    <input data-field="advance" placeholder="Advance (BDT)"><br><br>
    <input data-field="securityDeposit" placeholder="Security Deposit (BDT)"><br><br>
    <input data-field="yearBuilt" placeholder="Year Built"><br><br>
    <input data-field="propertyType" placeholder="Property Type"><br><br>
    <input data-field="interior" placeholder="Interior"><br><br>
    <input data-field="contact" placeholder="Contact Info"><br><br>
    
    <button type="submit">Add Record</button>
  </form>

  <br>
  <button onclick="exportToExcel()">ğŸ“ Download Excel</button>
  <button onclick="shareWhatsApp()">ğŸ“¤ Share via WhatsApp</button>

  <h3>Records:</h3>
  <ul id="list"></ul>
</body>
</html>
